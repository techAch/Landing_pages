<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Ù†Ù…ÙˆØ°Ø¬ Ø·Ù„Ø¨ - Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø·Ù„Ø¨ Ø¨Ø³Ù‡ÙˆÙ„Ø©">
    <title>Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø·Ù„Ø¨</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: sans-serif, 'Courier New', Courier, monospace;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .form-container {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 100%;
        }
        h1 { color: #333; margin-bottom: 30px; text-align: center; }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        input.input-error, textarea.input-error {
            border-color: #e53935;
        }
        .error-msg {
            color: #e53935;
            font-size: 13px;
            margin-top: 5px;
            display: none;
        }
        button {
            width: 100%;
            padding: 14px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover:not(:disabled) {
            background: #764ba2;
        }
        button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        .success-msg {
            background: #c8e6c9;
            color: #2e7d32;
            padding: 15px;
            border-radius: 6px;
            margin-top: 20px;
            display: none;
            text-align: center;
        }
        @media(max-width: 480px) {
            .form-container { padding: 20px; }
            h1 { font-size: 20px; }
        }
    </style>
</head>
<body>
<div class="form-container">
    <h1>ğŸ“‹ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø·Ù„Ø¨</h1>
    <form class="order-form">
        <div class="form-group">
            <label for="name">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *</label>
            <input id="name" type="text" name="name" required>
            <div class="error-msg">Ø§Ù„Ù…Ø±Ø¬Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</div>
        </div>

        <div class="form-group">
            <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
            <input id="phone" type="tel" name="phone" placeholder="06XXXXXXXX" required>
            <div class="error-msg">Ø§Ù„Ù…Ø±Ø¬Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­</div>
        </div>

        <div class="form-group">
            <label for="note">Ù…Ù„Ø§Ø­Ø¸Ø© *</label>
            <textarea id="note" name="note" rows="4" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸ØªÙƒ Ù‡Ù†Ø§..."></textarea>
            <div class="error-msg">Ø§Ù„Ù…Ø±Ø¬Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ø·Ù„Ø¨</div>
        </div>

        <div class="form-group">
            <label for="address">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† *</label>
            <input id="address" type="text" name="address" placeholder="Ø§Ù„Ø­ÙŠØŒ Ø§Ù„Ø´Ø§Ø±Ø¹..." required>
            <div class="error-msg">Ø§Ù„Ù…Ø±Ø¬Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµØ­ÙŠØ­</div>
        </div>

        <div class="form-group">
            <label for="region">Ø§Ù„Ø¬Ù‡Ø© *</label>
            <select id="region" name="region" required>
                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¬Ù‡Ø©</option>
            </select>
            <div class="error-msg">Ø§Ù„Ù…Ø±Ø¬Ùˆ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¬Ù‡Ø©</div>
        </div>

        <div class="form-group">
            <label for="city">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© *</label>
            <select id="city" name="city" required>
                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</option>
            </select>
            <div class="error-msg">Ø§Ù„Ù…Ø±Ø¬Ùˆ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</div>
        </div>

        <div class="form-group">
            <label for="quantity">Ø§Ù„ÙƒÙ…ÙŠØ© *</label>
            <input id="quantity" type="number" name="quantity" value="1" min="1" required>
        </div>

        <button type="submit">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
    </form>
      <!-- /* ØµÙØ­Ø© Ø§Ù„Ø´ÙƒØ± Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ */ -->
    <div id="thankYouPage" style="display:none; text-align:center; padding:40px;">
        <h2 style="color:#0a7d3b;">Ø´ÙƒØ±Ø§Ù‹! âœ…</h2>
        <p style="font-size:18px; margin-top:15px;">
            ØªÙ…Ù‘ Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­<br>
            Ø³Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ù„Ù„ØªØ£ÙƒÙŠØ¯.
        </p>
    </div>
</div>

<script>
// Data for regions and their corresponding cities
const regions = {
    "Ø·Ù†Ø¬Ø©-ØªØ·ÙˆØ§Ù†-Ø§Ù„Ø­Ø³ÙŠÙ…Ø©": ["Ø·Ù†Ø¬Ø©","ØªØ·ÙˆØ§Ù†","Ø§Ù„Ø­Ø³ÙŠÙ…Ø©","Ø§Ù„Ø¹Ø±Ø§Ø¦Ø´","Ø´ÙØ´Ø§ÙˆÙ†","Ø§Ù„ÙØ­Øµ-Ø£Ù†Ø¬Ø±Ø©","ÙˆØ²Ø§Ù†"],
    "Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©": ["ÙˆØ¬Ø¯Ø©","Ø§Ù„Ù†Ø§Ø¸ÙˆØ±","Ø¨Ø±ÙƒØ§Ù†","Ø¬Ø±Ø§Ø¯Ø©","ØªØ§ÙˆØ±ÙŠØ±Øª","Ø§Ù„Ø¯Ø±ÙŠÙˆØ´","ÙØ¬ÙŠØ¬"],
    "ÙØ§Ø³-Ù…ÙƒÙ†Ø§Ø³": ["ÙØ§Ø³","Ù…ÙƒÙ†Ø§Ø³","Ø¥ÙØ±Ø§Ù†","ØµÙØ±Ùˆ","Ø§Ù„Ø­Ø§Ø¬Ø¨","Ù…ÙˆÙ„Ø§ÙŠ ÙŠØ¹Ù‚ÙˆØ¨","ØªØ§ÙˆÙ†Ø§Øª","Ø¨ÙˆÙ„Ù…Ø§Ù†"],
    "Ø§Ù„Ø±Ø¨Ø§Ø·-Ø³Ù„Ø§-Ø§Ù„Ù‚Ù†ÙŠØ·Ø±Ø©": ["Ø§Ù„Ø±Ø¨Ø§Ø·","Ø³Ù„Ø§","Ø§Ù„Ù‚Ù†ÙŠØ·Ø±Ø©","Ø§Ù„ØµØ®ÙŠØ±Ø§Øª-ØªÙ…Ø§Ø±Ø©","Ø³ÙŠØ¯ÙŠ Ù‚Ø§Ø³Ù…","Ø³ÙŠØ¯ÙŠ Ø³Ù„ÙŠÙ…Ø§Ù†","Ø§Ù„Ø®Ù…ÙŠØ³Ø§Øª"],
    "Ø¨Ù†ÙŠ Ù…Ù„Ø§Ù„-Ø®Ù†ÙŠÙØ±Ø©": ["Ø¨Ù†ÙŠ Ù…Ù„Ø§Ù„","Ø®Ù†ÙŠÙØ±Ø©","Ø£Ø²ÙŠÙ„Ø§Ù„","Ø§Ù„ÙÙ‚ÙŠÙ‡ Ø¨Ù† ØµØ§Ù„Ø­","Ø®Ø±ÙŠØ¨ÙƒØ©"],
    "Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡-Ø³Ø·Ø§Øª": ["Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡","Ø§Ù„Ù…Ø­Ù…Ø¯ÙŠØ©","Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©","Ù…Ø¯ÙŠÙˆÙ†Ø©","Ø§Ù„Ù†ÙˆØ§ØµØ±","Ø¨Ø±Ø´ÙŠØ¯","Ø³Ø·Ø§Øª","Ø³ÙŠØ¯ÙŠ Ø¨Ù†ÙˆØ±"],
    "Ù…Ø±Ø§ÙƒØ´-Ø¢Ø³ÙÙŠ": ["Ù…Ø±Ø§ÙƒØ´","Ø¢Ø³ÙÙŠ","Ø§Ù„ØµÙˆÙŠØ±Ø©","Ø§Ù„ÙŠÙˆØ³ÙÙŠØ©","Ø´ÙŠØ´Ø§ÙˆØ©","Ù‚Ù„Ø¹Ø© Ø§Ù„Ø³Ø±Ø§ØºÙ†Ø©","Ø§Ù„Ø±Ø­Ø§Ù…Ù†Ø©"],
    "Ø¯Ø±Ø¹Ø©-ØªØ§ÙÙŠÙ„Ø§Ù„Øª": ["Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠØ©","ÙˆØ±Ø²Ø§Ø²Ø§Øª","ØªÙ†ØºÙŠØ±","Ù…ÙŠØ¯Ù„Øª","Ø²Ø§ÙƒÙˆØ±Ø©"],
    "Ø³ÙˆØ³-Ù…Ø§Ø³Ø©": ["Ø£ÙƒØ§Ø¯ÙŠØ±","Ø¥Ù†Ø²ÙƒØ§Ù†","Ø§Ø´ØªÙˆÙƒØ© Ø¢ÙŠØª Ø¨Ø§Ù‡Ø§","ØªÙŠØ²Ù†ÙŠØª","ØªØ§Ø±ÙˆØ¯Ø§Ù†Øª"],
    "ÙƒÙ„Ù…ÙŠÙ…-ÙˆØ§Ø¯ Ù†ÙˆÙ†": ["ÙƒÙ„Ù…ÙŠÙ…","Ø·Ø§Ù†Ø·Ø§Ù†","Ø³ÙŠØ¯ÙŠ Ø¥ÙÙ†ÙŠ","Ø¢Ø³Ø§ Ø§Ù„Ø²Ø§Ùƒ"],
    "Ø§Ù„Ø¹ÙŠÙˆÙ†-Ø§Ù„Ø³Ø§Ù‚ÙŠØ© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡": ["Ø§Ù„Ø¹ÙŠÙˆÙ†","Ø¨ÙˆØ¬Ø¯ÙˆØ±","Ø·Ø±ÙØ§ÙŠØ©","Ø§Ù„Ø³Ù…Ø§Ø±Ø©"],
    "Ø§Ù„Ø¯Ø§Ø®Ù„Ø©-ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø°Ù‡Ø¨": ["Ø§Ù„Ø¯Ø§Ø®Ù„Ø©","Ø£ÙˆØ³Ø±Ø¯"]
};

const regionSelect = document.getElementById('region');
const citySelect = document.getElementById('city');
const form = document.querySelector('.order-form');

Object.keys(regions).forEach(r => {
    const opt = document.createElement('option');
    opt.value = r;
    opt.textContent = r;
    regionSelect.appendChild(opt);
});

regionSelect.addEventListener('change', () => {
    citySelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</option>';
    if (regions[regionSelect.value]) {
        regions[regionSelect.value].forEach(c => {
            const opt = document.createElement('option');
            opt.value = c;
            opt.textContent = c;
            citySelect.appendChild(opt);
        });
    }
});
  /* Check if order was already sent in this session */
  window.addEventListener('pageshow', () => {
    if (sessionStorage.getItem('orderSent_')) {
      form.style.display = 'none';
      document.getElementById('thankYouPage').style.display = 'block';
    }
  });

// Form submission handling
let isSubmitting = false;
const AppScriptURL = 'https://script.google.com/macros/s/AKfycbzGfvqYdjFdSSLx07Yl2T1tHzMIbg6vqZUm79YE4Mj-axBRGVhXxt1GzY0IELFEyVnCvA/exec'; // ØºÙŠÙ‘Ø±Ù‡Ø§ ØµØ§Ø­Ø¨ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø¥Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø³ÙƒØ±ÙŠØ¨Øª Ø¬ÙˆØ¬Ù„ Ø§Ù„Ø®Ø§Øµ Ø¨Ù‡

form.addEventListener('submit', (e) => {
    e.preventDefault();
    if (isSubmitting) return;
    isSubmitting = true;

    const data = {
        name: form.name.value.trim(),
        phone: form.phone.value.trim(),
        region: form.region.value,
        city: form.city.value,
        address: form.address.value.trim(),
        quantity: form.quantity.value,
        note: form.note.value.trim()
    };
    const submitButton = form.querySelector('button[type="submit"]');
    submitButton.disabled = true;
    submitButton.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';

    // Build form-encoded data from the actual form (ensures textarea and all fields are included)
    const formParams = new URLSearchParams();
    for (const [k, v] of new FormData(form)) {
        const value = (typeof v === 'string') ? v.trim() : v;
        formParams.append(k, value);
    }
    // Debug: show which fields will be sent
    console.log('Submitting fields:', Array.from(formParams.entries()));

    fetch(AppScriptURL, {
        method: 'POST',
        body: formParams // browser will use application/x-www-form-urlencoded
    })
    .then(response => {
        if (response.ok) {
            form.reset();
            sessionStorage.setItem('orderSent_', 'true');
            form.style.display = 'none';
            document.getElementById('thankYouPage').style.display = 'block';
        } else {
            alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.');
    })
    .finally(() => {
        // restore submit state
        isSubmitting = false;
        submitButton.disabled = false;
        submitButton.textContent = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨';
    });
});
</script>
</body>
</html>